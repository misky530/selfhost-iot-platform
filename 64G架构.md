å®Œç¾!æ–¹æ¡ˆç¡®å®šäº†,è®©æˆ‘ç»™ä½ è®¾è®¡å®Œæ•´çš„æ¶æ„æ–¹æ¡ˆ ğŸ¯

## ğŸ—ï¸ æœ€ç»ˆæ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¤–éƒ¨ MQTT Broker                                            â”‚
â”‚  hats.hcs.cn:1883                                           â”‚
â”‚  Topic: mtic/msg/client/realtime/#                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ MQTT Subscribe (QoS 2)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RKE2 Kubernetes é›†ç¾¤ (VMware è™šæ‹Ÿæœº - æ¡¥æ¥ç½‘ç»œ)            â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Master Node (192.168.1.101)                            â”‚ â”‚
â”‚  â”‚ - 12GB RAM / 4vCPU / 60GB Disk                         â”‚ â”‚
â”‚  â”‚ - RKE2 Server + etcd                                   â”‚ â”‚
â”‚  â”‚ - å¯è°ƒåº¦ Pod (å…è®¸è¿è¡Œåº”ç”¨)                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Worker Node 1 (192.168.1.102)                          â”‚ â”‚
â”‚  â”‚ - 12GB RAM / 4vCPU / 60GB Disk                         â”‚ â”‚
â”‚  â”‚ - RKE2 Agent                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Worker Node 2 (192.168.1.103)                          â”‚ â”‚
â”‚  â”‚ - 12GB RAM / 4vCPU / 60GB Disk                         â”‚ â”‚
â”‚  â”‚ - RKE2 Agent                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  éƒ¨ç½²çš„åº”ç”¨ Pods (æ— çŠ¶æ€,è‡ªåŠ¨è°ƒåº¦):                         â”‚
â”‚  â”œâ”€ MQTT Client (Deployment Ã— 3 å‰¯æœ¬)                      â”‚
â”‚  â”‚   â””â”€ è®¢é˜…å¤–éƒ¨ MQTT â†’ åˆæ­¥æ•°æ®å¤„ç†                       â”‚
â”‚  â”œâ”€ Data Processor (Deployment Ã— 3 å‰¯æœ¬)                   â”‚
â”‚  â”‚   â””â”€ æå– tenantId/projectId â†’ æ•°æ®æ¸…æ´—                â”‚
â”‚  â”œâ”€ Kafka Producer (Deployment Ã— 2 å‰¯æœ¬)                   â”‚
â”‚  â”‚   â””â”€ æ¨é€åˆ°ç‰©ç†æœº Kafka (192.168.1.100:9092)          â”‚
â”‚  â”œâ”€ Kafka Consumer (Deployment Ã— 2 å‰¯æœ¬)                   â”‚
â”‚  â”‚   â””â”€ æ¶ˆè´¹ Kafka â†’ å†™å…¥ TimescaleDB                     â”‚
â”‚  â”œâ”€ Grafana (Deployment Ã— 2 å‰¯æœ¬)                          â”‚
â”‚  â”‚   â””â”€ è¿æ¥ TimescaleDB â†’ å¯è§†åŒ– Dashboard               â”‚
â”‚  â”œâ”€ Frontend (Deployment Ã— 2 å‰¯æœ¬)                         â”‚
â”‚  â”‚   â””â”€ React/Vue å‰ç«¯åº”ç”¨                                â”‚
â”‚  â””â”€ ArgoCD (Deployment Ã— 1)                                â”‚
â”‚      â””â”€ GitOps æŒç»­éƒ¨ç½²                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ ç½‘ç»œè¿æ¥ (æ¡¥æ¥,åŒç½‘æ®µç›´è¿)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Windows 10 ç‰©ç†æœº (192.168.1.100)                          â”‚
â”‚  64GB RAM / 350GB Disk                                      â”‚
â”‚                                                              â”‚
â”‚  Docker Desktop:                                            â”‚
â”‚  â”œâ”€ Harbor (ç§æœ‰é•œåƒä»“åº“)                                   â”‚
â”‚  â”‚   â””â”€ ç«¯å£: 8080 (HTTP)                                  â”‚
â”‚  â”‚   â””â”€ èµ„æº: 4GB RAM / 2 Core / 100GB                    â”‚
â”‚  â”‚                                                          â”‚
â”‚  â”œâ”€ Kafka (KRaft å•èŠ‚ç‚¹æ¨¡å¼)                               â”‚
â”‚  â”‚   â””â”€ ç«¯å£: 9092 (Broker)                               â”‚
â”‚  â”‚   â””â”€ èµ„æº: 6GB RAM / 2 Core / 80GB                     â”‚
â”‚  â”‚   â””â”€ Topic: iot.{tenantId}.{projectId}                 â”‚
â”‚  â”‚   â””â”€ ä¿ç•™ç­–ç•¥: 3 å¤©                                    â”‚
â”‚  â”‚                                                          â”‚
â”‚  â””â”€ TimescaleDB (PostgreSQL æ‰©å±•)                          â”‚
â”‚      â””â”€ ç«¯å£: 5432                                         â”‚
â”‚      â””â”€ èµ„æº: 6GB RAM / 2 Core / 100GB                    â”‚
â”‚      â””â”€ æ•°æ®ä¿ç•™: 3 å¤©è‡ªåŠ¨æ¸…ç†                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®æµå‘:
å¤–éƒ¨ MQTT â†’ K8s MQTT Client â†’ K8s Data Processor 
  â†’ K8s Kafka Producer â†’ ç‰©ç†æœº Kafka â†’ K8s Kafka Consumer 
  â†’ ç‰©ç†æœº TimescaleDB â†’ K8s Grafana â†’ Frontend å±•ç¤º
```

---

## ğŸ“Š è¯¦ç»†èµ„æºåˆ†é…è¡¨

### ç‰©ç†æœºèµ„æºåˆ†é… (Windows 10)

| ç»„ä»¶ | å†…å­˜ | CPU | ç£ç›˜ | è¯´æ˜ |
|------|------|-----|------|------|
| Windows 10 ç³»ç»Ÿ | 8GB | - | 50GB | ç³»ç»Ÿä¿ç•™ |
| Docker Desktop | 2GB | - | 20GB | å®¹å™¨è¿è¡Œæ—¶ |
| **Harbor** | **4GB** | **2 Core** | **100GB** | é•œåƒä»“åº“ |
| **Kafka** | **6GB** | **2 Core** | **80GB** | æ¶ˆæ¯é˜Ÿåˆ— |
| **TimescaleDB** | **6GB** | **2 Core** | **100GB** | æ—¶åºæ•°æ®åº“ |
| VMware Workstation | 2GB | - | - | è™šæ‹ŸåŒ–å¹³å° |
| **ç»™è™šæ‹Ÿæœºåˆ†é…** | **36GB** | **å‰©ä½™** | - | 3ä¸ªVMæ€»å’Œ |
| **ç‰©ç†æœºå°è®¡** | **64GB** | **6 Coreå ç”¨** | **350GB** | - |

### è™šæ‹Ÿæœºèµ„æºåˆ†é…

| è™šæ‹Ÿæœº | å†…å­˜ | vCPU | ç£ç›˜ | IPåœ°å€ | è§’è‰² |
|--------|------|------|------|--------|------|
| rke2-master | 12GB | 4 | 60GB | 192.168.1.101 | æ§åˆ¶å¹³é¢+å·¥ä½œèŠ‚ç‚¹ |
| rke2-worker1 | 12GB | 4 | 60GB | 192.168.1.102 | å·¥ä½œèŠ‚ç‚¹ |
| rke2-worker2 | 12GB | 4 | 60GB | 192.168.1.103 | å·¥ä½œèŠ‚ç‚¹ |
| **VM å°è®¡** | **36GB** | **12 vCPU** | **180GB** | - | - |

### K8s åº”ç”¨èµ„æºé…ç½®

| åº”ç”¨ | å‰¯æœ¬æ•° | CPU Request | CPU Limit | Memory Request | Memory Limit | è°ƒåº¦ç­–ç•¥ |
|------|--------|-------------|-----------|----------------|--------------|----------|
| MQTT Client | 3 | 100m | 200m | 128Mi | 256Mi | Podåäº²å’Œ |
| Data Processor | 3 | 200m | 500m | 256Mi | 512Mi | Podåäº²å’Œ |
| Kafka Producer | 2 | 100m | 200m | 128Mi | 256Mi | æ— é™åˆ¶ |
| Kafka Consumer | 2 | 200m | 500m | 256Mi | 512Mi | æ— é™åˆ¶ |
| Grafana | 2 | 200m | 500m | 256Mi | 512Mi | æ— é™åˆ¶ |
| Frontend | 2 | 100m | 200m | 128Mi | 256Mi | æ— é™åˆ¶ |
| ArgoCD | 1 | 500m | 1000m | 512Mi | 1Gi | MasterèŠ‚ç‚¹ä¼˜å…ˆ |
| Nginx Ingress | è‡ªåŠ¨ | 100m | 200m | 128Mi | 256Mi | DaemonSet |

**èµ„æºé¢„ä¼°:**
- CPU Request æ€»è®¡: ~4 Core
- CPU Limit æ€»è®¡: ~8.5 Core
- Memory Request æ€»è®¡: ~3.2GB
- Memory Limit æ€»è®¡: ~6.5GB

âœ… **ç»“è®º**: 36GB è™šæ‹Ÿæœºèµ„æºå®Œå…¨å¤Ÿç”¨,è¿˜æœ‰å……è¶³ä½™é‡!

---

## ğŸŒ ç½‘ç»œè§„åˆ’

### IP åœ°å€åˆ†é…

| è®¾å¤‡ | IPåœ°å€ | ä¸»æœºå | ç”¨é€” |
|------|--------|--------|------|
| Windows ç‰©ç†æœº | 192.168.1.100 | windows-host | Harbor/Kafka/TimescaleDB |
| RKE2 Master | 192.168.1.101 | rke2-master | K8s æ§åˆ¶å¹³é¢+å·¥ä½œèŠ‚ç‚¹ |
| RKE2 Worker1 | 192.168.1.102 | rke2-worker1 | K8s å·¥ä½œèŠ‚ç‚¹ |
| RKE2 Worker2 | 192.168.1.103 | rke2-worker2 | K8s å·¥ä½œèŠ‚ç‚¹ |

**ç½‘ç»œé…ç½®è¦ç‚¹:**
- VMware ç½‘ç»œé€‚é…å™¨: **æ¡¥æ¥æ¨¡å¼ (Bridged)**
- æ‰€æœ‰èŠ‚ç‚¹ä½¿ç”¨**é™æ€ IP**(é¿å… DHCP å˜åŠ¨)
- ç½‘å…³/DNS: ä½¿ç”¨è·¯ç”±å™¨çš„ç½‘å…³åœ°å€

### ç«¯å£æ¸…å•

**ç‰©ç†æœºå¯¹å¤–æš´éœ²:**

| æœåŠ¡ | ç«¯å£ | åè®® | è®¿é—®åœ°å€ | ç”¨é€” |
|------|------|------|----------|------|
| Harbor Web | 8080 | HTTP | http://192.168.1.100:8080 | é•œåƒä»“åº“ç®¡ç† |
| Harbor Registry | 8080 | HTTP | 192.168.1.100:8080 | é•œåƒ pull/push |
| Kafka Broker | 9092 | TCP | 192.168.1.100:9092 | ç”Ÿäº§/æ¶ˆè´¹æ¶ˆæ¯ |
| TimescaleDB | 5432 | TCP | 192.168.1.100:5432 | æ•°æ®åº“è¿æ¥ |

**K8s é›†ç¾¤å†…éƒ¨:**

| ç”¨é€” | ç«¯å£ | èŠ‚ç‚¹ | è¯´æ˜ |
|------|------|------|------|
| Kubernetes API | 6443 | Master | kubectl è®¿é—® |
| RKE2 Supervisor | 9345 | Master | Worker æ³¨å†Œ |
| etcd Client | 2379 | Master | etcd è®¿é—® |
| Kubelet | 10250 | All | èŠ‚ç‚¹é€šä¿¡ |
| NodePort èŒƒå›´ | 30000-32767 | Worker | Service å¯¹å¤– |

**K8s å¯¹å¤–æœåŠ¡ (é€šè¿‡ Ingress):**

| æœåŠ¡ | è®¿é—®æ–¹å¼ | è¯´æ˜ |
|------|----------|------|
| Grafana | http://192.168.1.101:30080 | Dashboard |
| Frontend | http://192.168.1.101:30081 | å‰ç«¯åº”ç”¨ |
| ArgoCD | http://192.168.1.101:30082 | GitOps ç®¡ç† |

---

## ğŸ”„ æ•°æ®æµè®¾è®¡

### å®Œæ•´æ•°æ®é“¾è·¯

```
1. MQTT æ•°æ®é‡‡é›†å±‚
   å¤–éƒ¨ Broker (hats.hcs.cn:1883)
   â†“ è®¢é˜… mtic/msg/client/realtime/#
   K8s MQTT Client Pod (3å‰¯æœ¬,QoS=2 ä¸ä¸¢æ¶ˆæ¯)
   
2. æ•°æ®å¤„ç†å±‚
   â†“ ä¼ é€’ JSON æ•°æ®
   K8s Data Processor Pod (3å‰¯æœ¬)
   - æå– tenantId, projectId
   - æ•°æ®éªŒè¯ã€æ¸…æ´—
   - æ·»åŠ æ—¶é—´æˆ³
   
3. æ¶ˆæ¯é˜Ÿåˆ—å±‚
   â†“ æ¨é€åˆ° Kafka
   K8s Kafka Producer Pod (2å‰¯æœ¬)
   â†“ ç½‘ç»œè¿æ¥åˆ°ç‰©ç†æœº
   ç‰©ç†æœº Kafka (192.168.1.100:9092)
   - Topic ç­–ç•¥: iot.{tenantId}.{projectId}
   - åˆ†åŒº: 3
   - å‰¯æœ¬: 1 (å•èŠ‚ç‚¹)
   - ä¿ç•™: 3å¤©
   
4. æ•°æ®æŒä¹…åŒ–å±‚
   Kafka Consumer Pod (2å‰¯æœ¬) æ¶ˆè´¹æ¶ˆæ¯
   â†“ JDBC è¿æ¥
   ç‰©ç†æœº TimescaleDB (192.168.1.100:5432)
   - è‡ªåŠ¨åˆ†åŒº (æŒ‰å¤©)
   - æ•°æ®ä¿ç•™ç­–ç•¥: 3å¤©è‡ªåŠ¨åˆ é™¤
   - ç´¢å¼•: tenantId, projectId, timestamp
   
5. å¯è§†åŒ–å±‚
   K8s Grafana Pod æŸ¥è¯¢æ•°æ®
   â†“ å±•ç¤º Dashboard
   K8s Frontend Pod æä¾› Web ç•Œé¢
```

### æ•°æ®ä¸ä¸¢å¤±ä¿éšœæœºåˆ¶

| å±‚çº§ | ä¿éšœæªæ–½ | é…ç½® |
|------|----------|------|
| MQTT è®¢é˜… | QoS 2 (Exactly Once) | `mqtt_client.subscribe(qos=2)` |
| MQTT Client | å¤šå‰¯æœ¬å®¹é”™ | Deployment replicas=3 |
| Kafka Producer | ACK ç¡®è®¤ | `acks='all', retries=3` |
| Kafka | æ¶ˆæ¯æŒä¹…åŒ– | `log.retention.hours=72` |
| Kafka Consumer | æ‰‹åŠ¨æäº¤ offset | `enable_auto_commit=False` |
| TimescaleDB | äº‹åŠ¡å†™å…¥ | `autocommit=False` |

---

## ğŸ“ ç›®å½•ç»“æ„è§„åˆ’

```
C:\iot-platform\
â”œâ”€ docker-compose\           # ç‰©ç†æœº Docker æœåŠ¡
â”‚  â”œâ”€ harbor\
â”‚  â”‚  â””â”€ docker-compose.yml
â”‚  â”œâ”€ kafka\
â”‚  â”‚  â””â”€ docker-compose.yml
â”‚  â””â”€ timescaledb\
â”‚     â””â”€ docker-compose.yml
â”‚
â”œâ”€ k8s-manifests\            # K8s åº”ç”¨æ¸…å•
â”‚  â”œâ”€ mqtt-client\
â”‚  â”‚  â”œâ”€ deployment.yaml
â”‚  â”‚  â””â”€ configmap.yaml
â”‚  â”œâ”€ data-processor\
â”‚  â”œâ”€ kafka-producer\
â”‚  â”œâ”€ kafka-consumer\
â”‚  â”œâ”€ grafana\
â”‚  â”œâ”€ frontend\
â”‚  â””â”€ argocd\
â”‚
â”œâ”€ vmware-vms\               # è™šæ‹Ÿæœºé…ç½®æ–‡ä»¶
â”‚  â”œâ”€ rke2-master\
â”‚  â”œâ”€ rke2-worker1\
â”‚  â””â”€ rke2-worker2\
â”‚
â””â”€ docs\
   â”œâ”€ architecture.md        # æœ¬æ–‡æ¡£
   â”œâ”€ deployment-guide.md    # éƒ¨ç½²æ‰‹å†Œ
   â””â”€ troubleshooting.md     # æ•…éšœæ’æŸ¥
```

---

## ğŸ¯ éƒ¨ç½²æ—¶é—´è¡¨ (åˆ†é˜¶æ®µ)

### ç¬¬ä¸€å‘¨: åŸºç¡€è®¾æ–½æ­å»º

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | è¾“å‡º |
|------|------|----------|------|
| 1.1 | Windows å®‰è£… Docker Desktop | 1å°æ—¶ | Docker å¯ç”¨ |
| 1.2 | éƒ¨ç½² Harbor é•œåƒä»“åº“ | 2å°æ—¶ | Harbor å¯è®¿é—® |
| 1.3 | VMware åˆ›å»º 3 ä¸ªè™šæ‹Ÿæœº | 2å°æ—¶ | Ubuntu 22.04 å°±ç»ª |
| 1.4 | é…ç½®è™šæ‹Ÿæœºç½‘ç»œ(é™æ€IP) | 1å°æ—¶ | ç½‘ç»œäº’é€š |
| 1.5 | å®‰è£… RKE2 Master èŠ‚ç‚¹ | 1å°æ—¶ | kubectl å¯ç”¨ |
| 1.6 | åŠ å…¥ 2 ä¸ª Worker èŠ‚ç‚¹ | 1å°æ—¶ | 3èŠ‚ç‚¹é›†ç¾¤å°±ç»ª |

### ç¬¬äºŒå‘¨: æ•°æ®é“¾è·¯æ‰“é€š

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | è¾“å‡º |
|------|------|----------|------|
| 2.1 | éƒ¨ç½² Kafka (ç‰©ç†æœº) | 2å°æ—¶ | Kafka å¯ç”¨ |
| 2.2 | éƒ¨ç½² TimescaleDB (ç‰©ç†æœº) | 2å°æ—¶ | æ•°æ®åº“å°±ç»ª |
| 2.3 | å¼€å‘ MQTT Client (Python) | 4å°æ—¶ | å®¹å™¨é•œåƒ |
| 2.4 | éƒ¨ç½² MQTT Client åˆ° K8s | 1å°æ—¶ | èƒ½è®¢é˜… MQTT |
| 2.5 | å¼€å‘ Data Processor | 4å°æ—¶ | æ•°æ®å¤„ç†é€»è¾‘ |
| 2.6 | æ‰“é€š MQTT â†’ Kafka é“¾è·¯ | 2å°æ—¶ | æ¶ˆæ¯æµè½¬éªŒè¯ |

### ç¬¬ä¸‰å‘¨: å¯è§†åŒ–ä¸è¿ç»´

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | è¾“å‡º |
|------|------|----------|------|
| 3.1 | å¼€å‘ Kafka Consumer | 4å°æ—¶ | å†™å…¥æ•°æ®åº“ |
| 3.2 | éƒ¨ç½² Grafana | 2å°æ—¶ | Dashboard å°±ç»ª |
| 3.3 | å¼€å‘å‰ç«¯åº”ç”¨ | 6å°æ—¶ | Web ç•Œé¢ |
| 3.4 | éƒ¨ç½² ArgoCD | 2å°æ—¶ | GitOps å°±ç»ª |
| 3.5 | é…ç½®ç›‘æ§å‘Šè­¦ | 2å°æ—¶ | Prometheus é›†æˆ |

---

## â¸ï¸ è®¾è®¡ç¡®è®¤ Checkpoint

åœ¨å¼€å§‹å®æ–½å‰,è¯·ç¡®è®¤ä»¥ä¸‹è®¾è®¡:

### âœ… æ¶æ„å±‚é¢
- [ ] 3 èŠ‚ç‚¹ K8s é›†ç¾¤ + ç‰©ç†æœºæ··åˆæ¶æ„
- [ ] æœ‰çŠ¶æ€æœåŠ¡(Harbor/Kafka/TimescaleDB)è¿è¡Œåœ¨ç‰©ç†æœº Docker
- [ ] æ— çŠ¶æ€åº”ç”¨è¿è¡Œåœ¨ K8s,è‡ªåŠ¨è°ƒåº¦

### âœ… èµ„æºå±‚é¢
- [ ] ç‰©ç†æœº: 64GB å¤Ÿç”¨,åˆ†é… 36GB ç»™è™šæ‹Ÿæœº
- [ ] æ¯ä¸ªè™šæ‹Ÿæœº: 12GB / 4vCPU / 60GB
- [ ] K8s åº”ç”¨æ€»éœ€æ±‚: ~6.5GB (åœ¨ 36GB èŒƒå›´å†…)

### âœ… ç½‘ç»œå±‚é¢
- [ ] æ¡¥æ¥æ¨¡å¼,æ‰€æœ‰èŠ‚ç‚¹åŒç½‘æ®µ
- [ ] é™æ€ IP: 192.168.1.100-103
- [ ] èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨ MQTT Broker

### âœ… æ•°æ®æµå±‚é¢
- [ ] MQTT â†’ K8s â†’ ç‰©ç†æœº Kafka â†’ K8s â†’ ç‰©ç†æœº DB
- [ ] å¤šå±‚ä¿éšœæœºåˆ¶,ç¡®ä¿ä¸ä¸¢æ•°æ®
- [ ] 3å¤©æ•°æ®ä¿ç•™ç­–ç•¥

**å¦‚æœä»¥ä¸Šéƒ½ç¡®è®¤æ— è¯¯,æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€æ­¥å®æ–½!**

**ä¸‹ä¸€æ­¥**: å®‰è£… Docker Desktop + éƒ¨ç½² Harbor

éœ€è¦æˆ‘ç»§ç»­å—? ğŸš€
